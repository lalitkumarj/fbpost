{% extends "base.html" %}
{% block title %} Login {% endblock %}
{% block content %}

<div class="container">
  
  <div class="starter-template">
    <!--<h1>Step 1:</h1>-->
    <p class="lead"> <h1 style="color: red;"> Step One: </h1> </p> 
    
    <fb:login-button autologoutlink="true" scope="manage_pages,user_groups, publish_stream, publish_actions" size="xlarge" onlogin="require('./log').info('onlogin callback')">
      Login to Facebook
	</fb:login-button>
    <div id="fb-root"></div>
  </div>
  
</div>


<script>
  window.fbAsyncInit = function() {
  FB.init({appId: '{{ facebook_app_id }}', status: true, cookie: true,
  xfbml: true});
  FB.Event.subscribe('{% if current_user %}auth.logout{% else %}auth.login{% endif %}', function(response) {
  {% if current_user %} window.location = "/logout" {% else %} window.location = "/service"; {% endif %}
  });
  };
  (function() {
  var e = document.createElement('script');
  e.type = 'text/javascript';
  e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
  e.async = true;
  document.getElementById('fb-root').appendChild(e);
  }());
</script>
{% endblock %}
